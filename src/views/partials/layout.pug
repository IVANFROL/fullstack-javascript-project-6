doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title= title || 'Welcome'
    link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css', rel='stylesheet', integrity='sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN', crossorigin='anonymous')
    link(href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css', rel='stylesheet')
  body
    nav.navbar.navbar-expand-lg.navbar-dark.bg-primary
      .container
        a.navbar-brand(href='/')
          i.bi.bi-house-door.me-2
          = t('common.title')
        button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navbarNav', aria-controls='navbarNav', aria-expanded='false', aria-label='Toggle navigation')
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.ms-auto
            if currentUser
              li.nav-item
                a.nav-link(href='/tasks')= t('common.tasks')
              li.nav-item
                a.nav-link(href='/users')= t('common.users')
              li.nav-item
                a.nav-link(href='/statuses')= t('common.statuses')
              li.nav-item
                a.nav-link(href='/labels')= t('common.labels')
              li.nav-item.dropdown
                a.nav-link.dropdown-toggle(href='#', role='button', data-bs-toggle='dropdown')
                  = currentUser.firstName + ' ' + currentUser.lastName
                ul.dropdown-menu
                  li
                    a.dropdown-item(href=`/users/${currentUser.id}/edit`)= t('common.settings')
                  li
                    hr.dropdown-divider
                  li
                    form(method='POST', action='/session', style='display: inline;')
                      input(type='hidden', name='_method', value='DELETE')
                      button.dropdown-item(type='submit', style='background: none; border: none; width: 100%; text-align: left;')= t('common.signOut')
            else
              li.nav-item
                a.nav-link(href='/session/new')= t('common.signIn')
              li.nav-item
                a.nav-link(href='/users/new')= t('common.signUp')
              li.nav-item
                a.nav-link(href='/tasks')= t('common.tasks')
              li.nav-item
                a.nav-link(href='/users')= t('common.users')
              li.nav-item
                a.nav-link(href='/statuses')= t('common.statuses')
              li.nav-item
                a.nav-link(href='/labels')= t('common.labels')
    
    .container.my-4
      if flash && (flash.error || flash.success)
        each message in flash.error
          .alert.alert-danger.alert-dismissible.fade.show(role='alert')
            = message
            button.btn-close(type='button', data-bs-dismiss='alert')
        each message in flash.success
          .alert.alert-success.alert-dismissible.fade.show(role='alert')
            = message
            button.btn-close(type='button', data-bs-dismiss='alert')
      
      block content
    
    footer.bg-light.mt-auto.py-4
      .container.text-center
        p.text-muted.mb-0 &copy; 2024 Fullstack JavaScript Project 6
    
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js', integrity='sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL', crossorigin='anonymous')
